# Инструкция по использованию функционала избранного

## Что было реализовано:

1. **API Endpoints:**
   - `toggle_favorite.php` - добавление/удаление экскурсии из избранного
   - `check_favorite.php` - проверка, находится ли экскурсия в избранном
   - `get_favorites.php` - получение списка избранных экскурсий

2. **Фронтенд:**
   - Обновлена страница деталей экскурсии (`excursionDetail.js`):
     - Кнопка "Сохранить" с SVG сердца
     - Сердце закрашивается, когда экскурсия в избранном
     - Доступно только авторизованным пользователям
   - Добавлена вкладка "Избранное" в профиле (`Profile.js`):
     - Отображает сохраненные экскурсии
     - Автоматически скрывает прошедшие экскурсии (date_event < текущая дата)
     - Автоматически скрывает скрытые администратором экскурсии (status != 'active')

## Установка:

1. **Обновите структуру базы данных:**
   Выполните SQL скрипт `update_favorites_table.sql` в вашей базе данных `globalgid2`.
   Этот скрипт добавит колонку `excursion_id` в таблицу `Favorites`.

2. **Проверьте работу:**
   - Войдите в систему
   - Откройте страницу любой экскурсии
   - Нажмите кнопку "Сохранить" - сердце должно закраситься
   - Перейдите в профиль → вкладка "Избранное" - экскурсия должна отображаться
   - Нажмите "Сохранить" еще раз - экскурсия должна удалиться из избранного

## Примечания:

- Функционал доступен только авторизованным пользователям
- Если пользователь не авторизован, при нажатии на "Сохранить" откроется модальное окно авторизации
- В избранном не отображаются:
  - Экскурсии с прошедшей датой (date_event < текущая дата)
  - Экскурсии со статусом 'hidden'

